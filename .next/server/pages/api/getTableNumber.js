"use strict";(()=>{var e={};e.id=721,e.ids=[721],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,o){return o in t?t[o]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,o)):"function"==typeof t&&"default"===o?t:void 0}}})},619:(e,t,o)=>{o.r(t),o.d(t,{config:()=>g,default:()=>d,routeModule:()=>c});var s={};o.r(s),o.d(s,{default:()=>i});var n=o(802),r=o(153),a=o(249);let l=require("googleapis"),u=JSON.parse(process.env.GOOGLE_CLOUD_CREDENTIALS||"{}");async function i(e,t){if(console.log("API route called with query:",e.query),"GET"!==e.method)return console.log("Method not allowed:",e.method),t.status(405).json({message:"Method not allowed"});let{name:o}=e.query;if(!o||"string"!=typeof o)return console.log("Invalid name parameter:",o),t.status(400).json({message:"Name is required and must be a string"});try{console.log("Initializing Google Auth");let e=new l.google.auth.GoogleAuth({credentials:u,scopes:["https://www.googleapis.com/auth/spreadsheets.readonly"]});console.log("Initializing Google Sheets");let s=l.google.sheets({version:"v4",auth:e});console.log("Fetching data from Google Sheets");let n=await s.spreadsheets.values.get({spreadsheetId:process.env.GOOGLE_SHEET_ID,range:"Tables!A:B"});console.log("Data fetched successfully");let r=n.data.values;if(!r)return console.log("No data found in the spreadsheet"),t.status(404).json({message:"No data found in the spreadsheet"});{console.log("Searching for matching name");let e=r.find(e=>e[0].toLowerCase()===o.toLowerCase());if(e)return console.log("Match found:",e),t.status(200).json({tableNumber:e[1]});return console.log("No match found for name:",o),t.status(404).json({message:"Name not found in the guest list"})}}catch(e){return console.error("Error in API route:",e),t.status(500).json({message:"Error fetching data from Google Sheets",error:e.message})}}let d=(0,a.l)(s,"default"),g=(0,a.l)(s,"config"),c=new n.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/getTableNumber",pathname:"/api/getTableNumber",bundlePath:"",filename:""},userland:s})},153:(e,t)=>{var o;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return o}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(o||(o={}))},802:(e,t,o)=>{e.exports=o(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var o=t(t.s=619);module.exports=o})();