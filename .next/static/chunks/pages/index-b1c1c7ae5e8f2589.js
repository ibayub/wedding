(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(578)}])},578:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var l=s(5893),r=s(7294);let a=e=>{let{children:t,...s}=e;return(0,l.jsx)("button",{...s,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-purple-600 hover:to-blue-500 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:t})},n=(0,r.forwardRef)((e,t)=>{let{...s}=e;return(0,l.jsx)("input",{ref:t,...s,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})});n.displayName="Input";let c=e=>{let{children:t,...s}=e;return(0,l.jsx)("label",{...s,className:"block text-gray-700 text-sm font-bold mb-2",children:t})},o=e=>{let{children:t,className:s,...r}=e;return(0,l.jsx)("div",{className:"rounded overflow-hidden shadow-lg bg-white p-6 ".concat(s),...r,children:t})},i=e=>{let{children:t,className:s,...r}=e;return(0,l.jsx)("div",{className:"font-bold text-xl mb-4 ".concat(s),...r,children:t})},d=e=>{let{children:t,className:s,...r}=e;return(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4 ".concat(s),...r,children:t})},u=e=>{let{children:t,className:s,...r}=e;return(0,l.jsx)("div",{className:"text-gray-700 text-base ".concat(s),...r,children:t})},m=e=>{let{children:t,className:s,...r}=e;return(0,l.jsx)("div",{className:"mt-4 ".concat(s),...r,children:t})},h=()=>(0,l.jsx)("hr",{className:"my-4 border-gray-300"}),x=e=>{let{isOpen:t,onClose:s,children:r}=e;return t&&(0,l.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[(0,l.jsx)("div",{className:"fixed inset-0 bg-black opacity-50",onClick:s}),(0,l.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-lg z-10",children:r})]})},b=e=>{let{children:t}=e;return(0,l.jsx)("div",{className:"text-lg font-bold mb-4",children:t})},f=e=>{let{children:t}=e;return(0,l.jsx)("h3",{className:"text-2xl font-bold mb-4",children:t})},p=e=>{let{children:t}=e;return(0,l.jsx)("div",{className:"text-base mb-4",children:t})},g=e=>{let{children:t}=e;return(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:t})};function j(){let[e,t]=(0,r.useState)(""),[s,j]=(0,r.useState)(null),[N,y]=(0,r.useState)([]),[w,v]=(0,r.useState)([]),[C,S]=(0,r.useState)(!1),[_,P]=(0,r.useState)(null),[k,E]=(0,r.useState)([]),[T,F]=(0,r.useState)(!1),O=(0,r.useRef)(null);(0,r.useEffect)(()=>{!async function(){try{let e=await fetch("/api/getNames"),t=await e.json();y(t.names||[])}catch(e){console.error("Error fetching names:",e)}}()},[]);let R=async t=>{if(t.preventDefault(),""===e.trim()){j(null);return}S(!0),P(null);try{let t=await fetch("/api/getTableNumber?name=".concat(encodeURIComponent(e))),s=await t.json();t.ok?j(s.tableNumber):P(s.message||"An error occurred while fetching your table number.")}catch(e){console.error("Error fetching table number:",e),P("An error occurred while fetching your table number. Please try again.")}finally{S(!1)}},U=async e=>{if(e.preventDefault(),0!==k.length)try{let e=k.map(async e=>{let t=new FormData;return t.append("file",e),t.append("upload_preset","wedding_uploads"),(await fetch("https://api.cloudinary.com/v1_1/movig/image/upload",{method:"POST",body:t})).json()}),t=await Promise.all(e);console.log("All Cloudinary responses",t),E([]),O.current&&(O.current.value=""),F(!0)}catch(e){console.error("Error uploading to Cloudinary:",e)}};return(0,l.jsxs)("div",{className:"min-h-screen h-screen bg-custom-image bg-cover bg-center flex items-center justify-center p-4",children:[(0,l.jsxs)(o,{className:"w-full max-w-md",children:[(0,l.jsxs)(i,{className:"text-center",children:[(0,l.jsx)("img",{src:"/header.jpg",alt:"Wedding Header",className:"w-full h-32 object-cover object-bottom mb-4"}),(0,l.jsx)(d,{className:"text-2xl font-bold text-center",children:"Neishay & Hussain Wedding"})]}),(0,l.jsxs)(u,{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Find my Table"}),(0,l.jsxs)("form",{onSubmit:R,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c,{htmlFor:"name",children:"Your Name"}),(0,l.jsx)(n,{id:"name",type:"text",placeholder:"Start typing your name",value:e,onChange:e=>{let s=e.target.value;t(s),s.length>=3&&N.length>0?v(N.filter(e=>e.toLowerCase().startsWith(s.toLowerCase()))):v([]),j(null),P(null)},disabled:C,autoComplete:"off"}),w.length>0&&(0,l.jsx)("ul",{className:"border rounded bg-white max-h-40 overflow-y-auto",children:w.map((e,s)=>(0,l.jsx)("li",{onClick:()=>t(e),className:"p-2 hover:bg-gray-200 cursor-pointer",children:e},s))})]}),(0,l.jsx)(a,{type:"submit",className:"w-full",disabled:C,children:C?"Finding Table...":"Find Table"})]})]}),s&&(0,l.jsxs)("div",{className:"text-center p-4 bg-green-100 rounded-md",children:[(0,l.jsxs)("p",{className:"font-semibold",children:["Welcome, ",e,"!"]}),(0,l.jsxs)("p",{className:"text-sm text-gray-700",children:["Your table number is: ",s]})]}),_&&(0,l.jsx)("div",{className:"text-center p-4 bg-red-100 rounded-md",children:(0,l.jsx)("p",{className:"text-sm text-red-700",children:_})}),(0,l.jsx)(h,{}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Share your Photos!"}),(0,l.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c,{htmlFor:"photos",children:"Upload Photos"}),(0,l.jsx)(n,{id:"photos",type:"file",accept:"image/*",multiple:!0,onChange:e=>{e.target.files&&E(Array.from(e.target.files))},ref:O,required:!0})]}),k.length>0&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Photo Preview"}),(0,l.jsx)("div",{className:"grid grid-cols-3 gap-2",children:k.map((e,t)=>(0,l.jsx)("img",{src:URL.createObjectURL(e),alt:"Preview ".concat(t+1),className:"w-full h-24 object-cover rounded"},t))})]}),(0,l.jsx)(a,{type:"submit",className:"w-full",disabled:0===k.length,children:"Submit Photos"})]})]})]}),(0,l.jsx)(m,{className:"text-center text-sm text-gray-500",children:"Made with ❤️ and ☕ by Ibrahim"})]}),(0,l.jsx)(x,{isOpen:T,onClose:()=>F(!1),children:(0,l.jsxs)(p,{children:[(0,l.jsxs)(b,{children:[(0,l.jsx)(f,{children:"Photos Uploaded Successfully"}),(0,l.jsx)(g,{children:"Your photos have been uploaded. Thank you for sharing!"})]}),(0,l.jsx)(a,{onClick:()=>F(!1),children:"Close"})]})})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);