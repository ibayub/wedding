(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(578)}])},578:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return y}});var s=l(5893),r=l(7294);let a=e=>{let{children:t,disabled:l,...r}=e;return(0,s.jsx)("button",{...r,disabled:l,className:"".concat(l?"bg-gray-300 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-purple-600 hover:to-blue-500"," text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"),children:t})},n=(0,r.forwardRef)((e,t)=>{let{...l}=e;return(0,s.jsx)("input",{ref:t,...l,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})});n.displayName="Input";let c=e=>{let{children:t,...l}=e;return(0,s.jsx)("label",{...l,className:"block text-gray-700 text-sm font-bold mb-2",children:t})},o=e=>{let{children:t,className:l,...r}=e;return(0,s.jsx)("div",{className:"rounded overflow-hidden shadow-lg bg-white p-6 ".concat(l),...r,children:t})},i=e=>{let{children:t,className:l,...r}=e;return(0,s.jsx)("div",{className:"font-bold text-xl mb-4 ".concat(l),...r,children:t})},d=e=>{let{children:t,className:l,...r}=e;return(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4 ".concat(l),...r,children:t})},u=e=>{let{children:t,className:l,...r}=e;return(0,s.jsx)("div",{className:"text-gray-700 text-base ".concat(l),...r,children:t})},m=e=>{let{children:t,className:l,...r}=e;return(0,s.jsx)("div",{className:"mt-4 ".concat(l),...r,children:t})},h=()=>(0,s.jsx)("hr",{className:"my-4 border-gray-300"}),x=e=>{let{isOpen:t,onClose:l,children:r}=e;return t&&(0,s.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black opacity-50",onClick:l}),(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-lg z-10",children:r})]})},b=e=>{let{children:t}=e;return(0,s.jsx)("div",{className:"text-lg font-bold mb-4",children:t})},f=e=>{let{children:t}=e;return(0,s.jsx)("h3",{className:"text-2xl font-bold mb-4",children:t})},g=e=>{let{children:t}=e;return(0,s.jsx)("div",{className:"text-base mb-4",children:t})},p=e=>{let{children:t}=e;return(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:t})},j=()=>(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,s.jsx)("div",{className:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12"})});function y(){let[e,t]=(0,r.useState)(""),[l,y]=(0,r.useState)(null),[N,v]=(0,r.useState)([]),[w,C]=(0,r.useState)([]),[S,_]=(0,r.useState)(!1),[k,P]=(0,r.useState)(null),[E,T]=(0,r.useState)([]),[F,O]=(0,r.useState)(!1),[R,U]=(0,r.useState)(!1),A=(0,r.useRef)(null);(0,r.useEffect)(()=>{!async function(){try{let e=await fetch("/api/getNames"),t=await e.json();v(t.names||[])}catch(e){console.error("Error fetching names:",e)}}()},[]);let L=async t=>{if(t.preventDefault(),""===e.trim()){y(null);return}_(!0),P(null);try{let t=await fetch("/api/getTableNumber?name=".concat(encodeURIComponent(e))),l=await t.json();t.ok?y(l.tableNumber):P(l.message||"An error occurred while fetching your table number.")}catch(e){console.error("Error fetching table number:",e),P("An error occurred while fetching your table number. Please try again.")}finally{_(!1)}},W=e=>{t(e),C([])},z=async e=>{if(e.preventDefault(),0!==E.length){U(!0);try{let e=E.map(async e=>{let t=new FormData;return t.append("file",e),t.append("upload_preset","wedding_uploads"),(await fetch("https://api.cloudinary.com/v1_1/movig/image/upload",{method:"POST",body:t})).json()}),t=await Promise.all(e);console.log("All Cloudinary responses",t),T([]),A.current&&(A.current.value=""),O(!0)}catch(e){console.error("Error uploading to Cloudinary:",e)}finally{U(!1)}}};return(0,s.jsxs)("div",{className:"min-h-screen h-screen bg-custom-image bg-cover bg-center flex items-center justify-center p-4",children:[R&&(0,s.jsx)(j,{}),(0,s.jsxs)(o,{className:"w-full max-w-md",children:[(0,s.jsxs)(i,{className:"text-center",children:[(0,s.jsx)("img",{src:"/header.jpg",alt:"Wedding Header",className:"w-full h-32 object-cover object-bottom mb-4"}),(0,s.jsx)(d,{className:"text-2xl font-bold text-center",children:"Neishay & Hussain Wedding"})]}),(0,s.jsxs)(u,{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Find my Table"}),(0,s.jsxs)("form",{onSubmit:L,className:"space-y-4 relative",children:[(0,s.jsxs)("div",{className:"space-y-2 relative",children:[(0,s.jsx)(c,{htmlFor:"name",children:"Your Name"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(n,{id:"name",type:"text",placeholder:"Start typing your name",value:e,onChange:e=>{let l=e.target.value;t(l),l.length>=3&&N.length>0?C(N.filter(e=>e.toLowerCase().startsWith(l.toLowerCase()))):C([]),y(null),P(null)},disabled:S,autoComplete:"off",className:"w-full pr-10"}),e&&(0,s.jsx)("button",{type:"button",onClick:()=>{t(""),C([]),y(null),P(null)},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-200 rounded-full p-1 w-6 h-6 flex items-center justify-center",children:"✕"})]}),w.length>0&&(0,s.jsx)("ul",{className:"border rounded bg-white max-h-40 overflow-y-auto",children:w.map((e,t)=>(0,s.jsx)("li",{onClick:()=>W(e),className:"p-2 hover:bg-gray-200 cursor-pointer",children:e},t))})]}),(0,s.jsx)(a,{type:"submit",className:"w-full ".concat(e?"bg-blue-500 hover:bg-blue-600":"bg-gray-300"),disabled:!e||S,children:S?"Finding Table...":"Find Table"})]})]}),l&&(0,s.jsxs)("div",{className:"text-center p-4 bg-green-100 rounded-md",children:[(0,s.jsxs)("p",{className:"font-semibold",children:["Welcome, ",e,"!"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:["Your table number is: ",l]})]}),k&&(0,s.jsx)("div",{className:"text-center p-4 bg-red-100 rounded-md",children:(0,s.jsx)("p",{className:"text-sm text-red-700",children:k})}),(0,s.jsx)(h,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Share your Photos!"}),(0,s.jsxs)("form",{onSubmit:z,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c,{htmlFor:"photos",children:"Upload Photos"}),(0,s.jsx)(n,{id:"photos",type:"file",accept:"image/*",multiple:!0,onChange:e=>{e.target.files&&T(Array.from(e.target.files))},ref:A,required:!0})]}),E.length>0&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Photo Preview"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:E.map((e,t)=>(0,s.jsx)("img",{src:URL.createObjectURL(e),alt:"Preview ".concat(t+1),className:"w-full h-24 object-cover rounded"},t))})]}),(0,s.jsx)(a,{type:"submit",className:"w-full ".concat(0===E.length?"bg-gray-300":"bg-purple-500 hover:bg-purple-600"),disabled:0===E.length,children:"Submit Photos"})]})]})]}),(0,s.jsx)(m,{className:"text-center text-sm text-gray-500",children:"Made with ❤️ and ☕ by Ibrahim"})]}),(0,s.jsx)(x,{isOpen:F,onClose:()=>O(!1),children:(0,s.jsxs)(g,{children:[(0,s.jsxs)(b,{children:[(0,s.jsx)(f,{children:"Photos Uploaded Successfully"}),(0,s.jsx)(p,{children:"Your photos have been uploaded. Thank you for sharing!"})]}),(0,s.jsx)(a,{onClick:()=>O(!1),children:"Close"})]})})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);